CLTimer rev.1.3

Руководство по программированию и эксплуатации

1. После прошивки нового Таймера, как значения по умолчанию устанавливаются:
- задержка начала разгона двигателя от момента нажатия кнопки управления - 3 сек.
- время плавной раскрутки двигателя до максимальных заданных оборотов - 3 сек
- рабочее время - 4 мин 30 секунд (можно запрограммировать - от 0 секунд (только время разгона и время торможениия) до 9 мин 50 сек)
- время плавной остановки двигателя - 3 сек
Данные параметры могут быть изменены в исхождном коде программы в разделе "Initial settings".
В случае, если требуется изменить подключение датчиков, то соответствующие изменения необходимо будет внести в исходный код в раздел "Hardware connections".

2. При подключении Таймера к СОМ-порту на скорости 115200 бод (8-N-1), после старта изделия можно принять следующие данные:
CLTimer. Rev.1.3				- наименование и версия прошивки
(c) Andrii Diagilev - dyagilev@gmail.com	- автор и e-mail для связи
FW signature: FFFFAD13				- сохраненная в EEPROM сигнатура прошивки данной версии 
Working time: 270				- рабочее время в секундах
working minutes: 4				- количество минут рабочего времени	
working 10 seconds periods: 3			- количество интервалов по 10 секунд, сверх указанніх ранее рабочих минут
Minimal trottle (DEC): 0			- минимальное запрограммированное значение "газа"
Maximal trottle (DEC): 1023 			- максимальное запрограммированное значение "газа"

3. Рабочий режим.
После включения, Таймера переходит в режим готовности. При этом:
- момент окончания фазы инициализации индицируется короткой вспышкой встроенного светодиода (150мс/150мс)
- после этого индицируется запрограммированое рабочее время вспышками основного светодиода:
а) минуты индицируются по количеству более длинными вспышками (длительность вспышки: 500мс / длительность паузы: 300мс), 
б) секунды индицируются более короткими вспышками (200мс/200мс) и указывают количество 10ти секундных интервалогв сверх индицированных ранее минут рабочего времени. 
в) в случае, если запрограммировано нулевое рабочее время (только разгон и торможение, т.е. всего 6 секунд работы мотора), данный режим индицируется одиночными очень короткими вспышками основного светодиода (40мс/500мс). 

Для включения Таймера необходимо нажать и удерживать кнопку управления примерно 0.3 ... 0.6 с до начала частых коротких вспышек (80мс/80мс) основного светодиода, которые будут происходить на протяжении времени подготовки к включению (3 сек), после этого начнется режим плавной раскрутки мотора, который будет индицироваться импульсами увеличивающейся длительности в течении 3 секунд, по окончанию этого периода времени мотор выйдет на обороты, установленные потенциометром (во время рабочего времени их можно регулироватоь) и будет работать на этих оборотах до окончания запрограммированного рабочего времени.
По окончанию периода рабочего времени начнется период плавной остановки двигателя, который будет продолжаться 3 секунды и индицироваться вспышками основного светодиода уменьшающейся длительности.

После полного останова двигателя Таймер опять перейдет в режим готовности.
Для повторного запуска Таймера в работу необходимо повторно нажать и удерживать кнопку управления, как было указано выше.

4. Режим программирования

Для изменения настроек Таймера необходимо перевести Таймер в режим программирования.
Переключение в режим программирования происходит при подаче питания на Таймер при нажатой кнопке управления. Так же войти в режим программирования можно зажав кнопку управления и нажав и отпустив кнопку "Сброс", расположенную на плате.
Для входа в режим, кнопку управления необходимо удерживать после подачи питания (или сброса) в течение периода не менее 1 секунды.
Начало режима программирования индицируется частыми вспышками основного светодиода (10 вспышек 150мс/150мс, в конце пауза 500 мс).

Номер этапа программирования индицируется короткими вспышками (250мс/250мс) встроенного светодиода.

Всего реализовано четыре этапа программирования:
1) установка количества минут рабочего времени.
2) установка количество десятисекундных интервалов рабочего времени сверх установленных на первом шаге минут рабочего времени
3) минимальное значение "газа", которое может быт задано управляющим потенциометром
4) максимальное значение "газа", которое может быт задано управляющим потенциометром

Установка количества минут рабочего времени.

После завершения индикации вхождения в режим программирования начинается циклический процесс установки количества минут рабочего времени.
Начало режима индицируется одной вспышкой встроенного светодиода, после этого запрограммированное количество рабочих минут индицируется количеством вспышек основного светодиода (250мс/250мс). В случае, если установленное количество рабочих минут равно нулю, индицируется только одна котроткая вспышка основного светодиода (50мс/450мс).
После завершения индикации количества запрограммированных минут, Таймер ожидает нажатия кнопки управления для увеличения значения минут рабочего времени (до момента влючения встроенного светодиода, требуемая длительность нажатия кнопки управления - 0.2 ... 0.5 с), если кнопка не будет нажата, то будет отображен маркер завершения режима длинной вспышкой встроенного светодиода (1000мс/1000мс) и цикл отображения повторяется (одна вспышка встроенного светодиода - пауза - вспышки основновного светодиода по числу запрограммировнных минут - длинная вспышка встроенного светодиода ...)

В данном режиме можно запрограммировать рабочее время от 0 минут до 9 минут, при попытке увеличить значение минут рабочего времени сверх 9, значение запрограммированных минут будет установлено в ноль.

Для сохранения выставленного значения минут рабочего времени необходимо нажать кнопку управления на 0.3 ... 0.9 с после отображения маркера завершения режима. В случае, если нажатие будет выполнено успешно, запись параметра будет подтверждена короткой вспышкой основного светодиода (100мс/100мс), после чего Таймер перейдет ко второму этапу програмиирования - установке количества 10ти секундных интервалов рабочего времени.

Процесс установки и сохранения значения дополнительных 10ти секундных интервалов рабочего времени аналогичен процессу установки минут рабочего времени за исключением моментов:
- индикация режима производится двумя короткими вспышками встроенного светодиода (250мс/250мс)
- можно установить от 0 до 5 10ти секундных интервалов, при попытке увеличить значение больше 5 значение будет установлено в 0

После сохранения значения 10ти секундных интервалов, Таймер перейдет в режим установки значения минимального "газа", устанавливаемого подстроечным потенциометром. 

Начало режима будет индицироуваться тремя вспышками встроенного светодиода (250мс/250мс), продолжительность режима установки - 10 секунд, во время режима установки производится индикация вспышками основного светодиода, скважность импульсов при этом меняется в зависимости от текущего значения "газа", выставленного потенциометром (чем меньшее значение "газа" выставлено, тем меньше продолжительность свечения основного светодиода), необходимо добиться установки минимально доступного значения. 

Более точно процесс установки можно выполнить, принимая показания от Таймера в какую-либо терминальную программу на компьютере через СОМ-порт. 
Текущее значение в этом режиме будет обображаться, как: 
potentiometer min value = ХХХХ, где ХХХХ - значение в промежутке от 0 до 1023
Необходимо добиться минимального значения при вращении движка потенциометра и затем сохранить его (как можно ближе к 0).
Завершение режима так же индицируется длительной вспышкой встроенного светодиода (1000мс), после которой, для сохранения установленного значения, необходимо нажать на кнопку управления на время 0.3 ... 0.9 с. В случае, если кнопка не будет нажата, начнется повторный цикл данного этапа.

В случае, если кнопка будет успешно нажата, Таймер перейдет в режим установки значения максимального "газа". 
Данный режим полностью аналогичен предыдущему за исключением того, что его начало индицируется четырьмя вспышками встроенного светодиода и требуется устаановить максимальное значение (как можно ближе к 1023).

В случае сохранения выставленного значения максимального "газа", Таймер перейдет к первому пункту программирования - установке минут рабочего времени.

Выход из режима программирования осуществляется путем перезагрузки Таймера (нажатие кнопки "Сброс"), либо отключением и повторным подключением питания устройства.  

